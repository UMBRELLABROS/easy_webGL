<!DOCTYPE html>
<html lang="de">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />       
    <title> Kamera mit Math.js </title>    
    <link href="css/style.css" rel="stylesheet">
    <script src="js/gl.js"></script>
    <script src="js/geometry.js"></script>
    <script src="js/physics.js"></script>
    <script src="js/math.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/attribute.js"></script>
    <script src="js/uniform.js"></script>
    <script src="js/texture.js"></script>
    <script src="js/program.js"></script>    
    <script src="js/baseobject.js"></script>
    <script src="js/triangle.js"></script>
    <script src="js/dynamic.js"></script>
    <script src="js/item.js"></script>
    <script src="js/scene.js"></script>
    <script src="js/vertexshader.js"></script>
    <script src="js/fragmentshader.js"></script>
    <script src="js/world.js"></script>
    <script src="js/prop.js"></script>
    <script src="js/light.js"></script>
    <script src="js/camera.js"></script>
    <script src="js/director.js"></script>
    <link
  </head>

  <body> 
    
    <div id='canvas_container' ></div>      

    <p id=debug></p>

    Cube<br>
    <button onclick="acceleration(0,-9.81,0)">Gravity</button>     
    <br>
    <br>
    Moon<br>
    <button onclick="rotateProp1(-0.05,0,0)">Rotate -X</button> 
    <button onclick="rotateProp1(+0.05,0,0)">Rotate +X</button>
    <br>
    <button onclick="rotateProp1(0,-0.05,0)">Rotate -Y</button> 
    <button onclick="rotateProp1(0,+0.05,0)">Rotate +Y</button>
    <br>
    <button onclick="rotateProp1(0,0,-0.05)">Rotate -Z</button> 
    <button onclick="rotateProp1(0,0,+0.05)">Rotate +Z</button>
    <br>

    <br>
    <br>
    Pointlight<br>
    
    <div class="slidecontainer">
        X position
       <input type="range" min="-40" max="40" value="10" class="slider" id="lightX" 
       onchange="lightPos();" oninput="lightPos();"> 
       <br>
       Y position
       <input type="range" min="-30" max="30" value="30" class="slider" id="lightY" 
       onchange="lightPos();" oninput="lightPos();"> 
       Z position
       <input type="range" min="-50" max="50" value="0" class="slider" id="lightZ" 
       onchange="lightPos();" oninput="lightPos();">      
    </div>
    
          
  </body>

  <script>
    "use scrict";
    // Part 1 (getContext)
    // create canvas and gl(webGL) 
    var div = $('canvas_container');
    var canvas = dcE('canvas');
    canvas.className = "default_canvas";
    var title = dcE('div');
    canvas.width = div.offsetWidth;
    canvas.height = div.offsetHeight;
    div.appendChild(canvas);
    title.innerHTML = document.title;
    title.className = "div_footer";
    div.appendChild(title);
    
   
    var cube = Geometry.cube({radius:20});
    var sphere = Geometry.sphere({radius:0.05,stacks:15,slices:15});
    var sphereLight = Geometry.sphere({radius:0.05});
    var plane = Geometry.plane({radius:1});
    var plane2 = Geometry.plane({radius:0.2});
    var plane3 = Geometry.plane({radius:0.2});
   
    var director = new DirectorController(canvas);

    var camera1 = new Camera();
    camera1.type = CameraKind.LOOKAT;    
    camera1.dynamic.position = [0, 1.5, -1];
    camera1.dynamic.lookAt = [0, 1, 0];


    var surface = new PropService({
      geometry:plane,            
      color:[0.0,0.0,0.7,1],
      position:[0, 1, 0.5], 
      physics:{movable:false,elastic:0.9}           
    });
    surface.dynamic.orientation = [0.0,0,0];

    var surface2 = new PropService({
      geometry:plane2,            
      color:[0.9,0.0,0.0,1],
      position:[-.6, 1.4, 0.0], 
      physics:{movable:false,elastic:0.9}           
    });
    surface2.dynamic.orientation = [0.0,0,0.4];

    var surface3 = new PropService({
      geometry:plane2,            
      color:[0.9,0.9,0.0,1],
      position:[.6, 1.2, 0.0], 
      physics:{movable:false,elastic:0.9}           
    });
    surface3.dynamic.orientation = [0.0,0,-0.4];
    
    var ball9 = new PropService({
      geometry:sphere,     
      image : "misc/9ball.jpg",
      position: [-.6, 1.8,0],   
      shininess:20,
      physics:{movable:true,elastic:0.90}
      
    });
    
         
    var light1 = new LightService();
    light1.setKind(LightKind.DIRECT);
    light1.setDirection([-0., -0.9, -0.0]);  
    
    var light2 = new LightService();
    light2.setKind(LightKind.POINT);
    light2.position = [1,1.5,1];
    propLight = new PropService({geometry:sphereLight, color : [1,1,1,1], position:light2.position})

    var propC =[];
    propC.push(surface);    
    propC.push(surface2); 
    propC.push(surface3); 
    propC.push(ball9);    
    propC.push(propLight);

    var scene = new SceneService(propC, [light1, light2], [camera1]);

    director.addScene([scene]);

    director.action();

    function rotate(valueX,valueY,valueZ){
        ball14.dynamic.rotate = [valueX,valueY,valueZ];
    }

    function rotateProp1(valueX,valueY,valueZ){
        ball9.dynamic.rotate = [valueX,valueY,valueZ];
    }

    function acceleration(valueX,valueY,valueZ){
      ball9.dynamic.acceleration = [valueX,valueY,valueZ];
    }

    function lightPos(){
      var valueX = $('lightX').value;
      var valueY = $('lightY').value;
      var valueZ = $('lightZ').value;
      light2.dynamic.position = [valueX,valueY,valueZ];
      propLight.dynamic.position = [valueX,valueY,valueZ];      
    }
    lightPos();

    var time = 0;
    function rotateCamera(){
      
      var t = time/5000;
      if(t>(Math.abs(Math.PI*2)))
        time=0;
      var r= 100;
      var x= r * Math.sin(t);
      var z= r * Math.cos(t);     
      camera1.dynamic.position = [x,30,z];      
      time += 40;
      setTimeout("rotateCamera()",40);
    }
     // rotateCamera();
    
    </script>

</html>